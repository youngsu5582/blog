<!doctype html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="돈으로 시간을 사기 - 부제 : openai 통한 게시글 소개글 및 섬네일 자동 생성 스크립트" /><meta name="author" content="이영수" /><meta property="og:locale" content="ko" /><meta name="description" content="블로그 포스트 작성 시 소개글과 섬네일 생성을 자동화하였으며, OpenAI API를 이용해 불편함을 개선했다. 결제 및 토큰 처리 방법도 공유하며, 스크립트를 통해 시간을 단축하고 작업 효율성을 높였다. 이 과정에서 발생하는 비용과 시간 절약 효과를 강조하고 있다." /><meta property="og:description" content="블로그 포스트 작성 시 소개글과 섬네일 생성을 자동화하였으며, OpenAI API를 이용해 불편함을 개선했다. 결제 및 토큰 처리 방법도 공유하며, 스크립트를 통해 시간을 단축하고 작업 효율성을 높였다. 이 과정에서 발생하는 비용과 시간 절약 효과를 강조하고 있다." /><link rel="canonical" href="https://youngsu5582.life//posts/%EB%8F%88%EC%9C%BC%EB%A1%9C-%EC%8B%9C%EA%B0%84-%EC%82%AC%EA%B8%B0/" /><meta property="og:url" content="https://youngsu5582.life//posts/%EB%8F%88%EC%9C%BC%EB%A1%9C-%EC%8B%9C%EA%B0%84-%EC%82%AC%EA%B8%B0/" /><meta property="og:site_name" content="이영수 개발 블로그" /><meta property="og:image" content="https://youngsu5582.life//assets/img/thumbnail/2025-03-21-돈으로-시간-사기.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-03-22T07:32:50+09:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://youngsu5582.life//assets/img/thumbnail/2025-03-21-돈으로-시간-사기.png" /><meta property="twitter:title" content="돈으로 시간을 사기 - 부제 : openai 통한 게시글 소개글 및 섬네일 자동 생성 스크립트" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"이영수"},"dateModified":"2025-03-22T07:32:50+09:00","datePublished":"2025-03-22T07:32:50+09:00","description":"블로그 포스트 작성 시 소개글과 섬네일 생성을 자동화하였으며, OpenAI API를 이용해 불편함을 개선했다. 결제 및 토큰 처리 방법도 공유하며, 스크립트를 통해 시간을 단축하고 작업 효율성을 높였다. 이 과정에서 발생하는 비용과 시간 절약 효과를 강조하고 있다.","headline":"돈으로 시간을 사기 - 부제 : openai 통한 게시글 소개글 및 섬네일 자동 생성 스크립트","image":"https://youngsu5582.life//assets/img/thumbnail/2025-03-21-돈으로-시간-사기.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://youngsu5582.life//posts/%EB%8F%88%EC%9C%BC%EB%A1%9C-%EC%8B%9C%EA%B0%84-%EC%82%AC%EA%B8%B0/"},"url":"https://youngsu5582.life//posts/%EB%8F%88%EC%9C%BC%EB%A1%9C-%EC%8B%9C%EA%B0%84-%EC%82%AC%EA%B8%B0/"}</script><title>돈으로 시간을 사기 - 부제 : openai 통한 게시글 소개글 및 섬네일 자동 생성 스크립트 | 이영수 개발 블로그</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="이영수 개발 블로그"><meta name="application-name" content="이영수 개발 블로그"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-GDSPGC31HX"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-GDSPGC31HX'); }); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/en/" id="avatar" class="rounded-circle"><img src="/assets/img/avatar.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/en/">이영수 개발 블로그</a><p class="site-subtitle fst-italic mb-0">Learning Kata</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/en/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/en/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/en/articles/" class="nav-link"> <i class="fa-fw "></i> <span>ARTICLES</span> </a><li class="nav-item"> <a href="/en/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/youngsu5582" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['joyson5582','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/en/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/%EC%98%81%EC%88%98-%EC%9D%B4-b78498347/" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="https://www.rallit.com/hub/resumes/988543/%EC%9D%B4%EC%98%81%EC%88%98" aria-label="resume" target="_blank" rel="noopener noreferrer" > <i class="fas fa-file-alt"></i> </a> <a href="https://comet-pram-809.notion.site/185365707b6580859ec5ec052f2f6730" aria-label="portfolio" target="_blank" rel="noopener noreferrer" > <i class="fas fa-laptop-code"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/en/">Home</a> </span> <span>돈으로 시간을 사기 - 부제 : openai 통한 게시글 소개글 및 섬네일 자동 생성 스크립트</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button><style> .language-switcher { display: flex; gap: 10px; list-style: none; margin: 0; padding: 0; } .language-switcher li a { padding: 5px 10px; border: 1px solid #ccc; border-radius: 5px; text-decoration: none; color: #333; background-color: #f0f0f0; } .language-switcher li a:hover { background-color: #e0e0e0; } .language-switcher li .active-lang { /* 현재 활성화된 언어 텍스트 스타일 */ padding: 5px 10px; border: 1px solid #007bff; border-radius: 5px; color: white; background-color: #007bff; cursor: default; }</style><ul class="language-switcher"><li> <a href="https://youngsu5582.life/">한국어</a><li> <span class="active-lang">English</span></ul><search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>돈으로 시간을 사기 - 부제 : openai 통한 게시글 소개글 및 섬네일 자동 생성 스크립트</h1><p class="post-desc fw-light mb-4">블로그 포스트 작성 시 소개글과 섬네일 생성을 자동화하였으며, OpenAI API를 이용해 불편함을 개선했다. 결제 및 토큰 처리 방법도 공유하며, 스크립트를 통해 시간을 단축하고 작업 효율성을 높였다. 이 과정에서 발생하는 비용과 시간 절약 효과를 강조하고 있다.</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1742596370" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Mar 22, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/assets/img/thumbnail/2025-03-21-돈으로-시간-사기.png" class="popup img-link preview-img shimmer"><img src="/assets/img/thumbnail/2025-03-21-돈으로-시간-사기.png" alt="Preview Image" width="1200" height="630" loading="lazy"></a></div><div class="d-flex justify-content-between"> <span> By <em> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3607 words" > <em>20 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">돈으로 시간을 사기 - 부제 : openai 통한 게시글 소개글 및 섬네일 자동 생성 스크립트</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">돈으로 시간을 사기 - 부제 : openai 통한 게시글 소개글 및 섬네일 자동 생성 스크립트</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog> <br><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/openai/" class="post-tag no-text-decoration" >openai</a> <a href="/tags/blog/" class="post-tag no-text-decoration" >blog</a> <a href="/tags/automation/" class="post-tag no-text-decoration" >automation</a></div><div class="content"><blockquote><p>해당 글은 블로그를 작성하며 느낀 불편함을 해결한 내용을 다룹니다.</p></blockquote><h2 id="소개글-섬네일-생성의-불편함"><span class="me-2">소개글, 섬네일 생성의 불편함</span><a href="#소개글-섬네일-생성의-불편함" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>블로그를 하면서 SEO 를 위해서도, 가독성을 위해서도 포스트에 소개글을 작성하는 것과 섬네일을 포함하는게 매우 중요시 하다고 느꼈다. 그래서, GPT의 도움을 받아 포스트에 대한 소개글과 섬네일을 받는 식으로 포함을 시켰다.</p><p>이떄, 개인적으로 느끼는 불편함이 있었다.</p><p><a href="https://i.imgur.com/769WdYi.png" class="popup img-link shimmer"><img src="https://i.imgur.com/769WdYi.png" alt="500" loading="lazy"></a></p><p>GPT 를 들어가서 직접 포스트를 복사해서 넣고, 해당 내용을 다시 소개글에 작성해야 했다.</p><p><a href="https://i.imgur.com/oBNjPTn.png" class="popup img-link shimmer"><img src="https://i.imgur.com/oBNjPTn.png" alt="500" loading="lazy"></a></p><p>DALL-E 를 사용해야만, 매력있는 그림이 나오는데 위에서 소개글에서 사용한 채팅이 아닌 새로운 모델을 선택해 요청을 해야하는 것도 불편한 점중 하나였다.</p><p>뭐 어쩌겠는가.. 돈 없는 개발자는 직접 불편함을 뛸 수 밖에… 하지만, 이번에 취업하며 이정도의 돈쯤이야 😎 + Open AI API를 코드로는 한번도 사용해보지 않은거 같아서 사용해볼겸 도입해보았다.</p><h2 id="payment"><span class="me-2">Payment</span><a href="#payment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>모델 및 사용법에 대해 설명하기에 앞서, 결제 연동 및 방법에 대해서 설명한다.</p></blockquote><p><a href="https://platform.openai.com/settings/organization/billing/payment-methods">payment-methods</a> 에 들어가서 결제 수단을 등록한다.</p><p>카드번호, CVC, 주소번호를 입력하면? 결제 수단으로 성공적으로 등록된다. 등록후에 결제에 대해 안내해준다.</p><p><a href="https://i.imgur.com/Qfxkppo.png" class="popup img-link shimmer"><img src="https://i.imgur.com/Qfxkppo.png" alt="400" loading="lazy"></a></p><p>초기 금액 및 임계치 이하로 떨어지면 자동 충전할 지를 정한다. 5 달러 이하일 시, 10달러를 충전하도록 설정했다.</p><blockquote><p>10%의 세금이 발생합니다. ( 5달러 진행시, 5.5달러 결제 )</p></blockquote><p>결제를 완료하면</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>We're happy to share that we've automatically moved your organization to **Usage Tier 1** 
based on your usage history on our platform
</pre></table></code></div></div><p>와같이 Tier 1이 되었다는 안내를 해준다. 그러면, <a href="https://platform.openai.com/settings/organization/limits">Limits</a> 를 들어가서 비용 및 예산을 설정하자.</p><blockquote><p>API 의 Late Limit 은 사실상 중요하지 않으므로 스킵한다.</p></blockquote><p><a href="https://i.imgur.com/5GPJWSu.png" class="popup img-link shimmer"><img src="https://i.imgur.com/5GPJWSu.png" alt="" loading="lazy"></a></p><p>비용도 혹시나, 너무 많은 비용을 발생시키지 않게 제한적으로 지정했다.</p><h3 id="pricing"><span class="me-2">Pricing</span><a href="#pricing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://platform.openai.com/docs/pricing">pricing</a> 에 들어가서 금액을 확인해보자.</p><p>금액은 <code class="language-plaintext highlighter-rouge">Price per 1M tokens</code> 을 기준으로 산정되어있다. ( 1_000_000 )</p><p><a href="https://i.imgur.com/KqRpYVI.png" class="popup img-link shimmer"><img src="https://i.imgur.com/KqRpYVI.png" alt="500" loading="lazy"></a></p><p>매우 다양한 모델들이 있다. 이중에서, 자신이 적절한 모델을 선택하면 된다.</p><p>이때, 근본적인 질문으로 <code class="language-plaintext highlighter-rouge">토큰이 얼마나 나오지?</code> 를 생각해야 한다.</p><h3 id="토큰-계산"><span class="me-2">토큰 계산</span><a href="#토큰-계산" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>open ai 는 <a href="https://github.com/openai/tiktoken">tiktoken</a> 을 통해 간편하게 입력값에 대한 토큰 수가 얼마나 되는지 알려준다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">tiktoken</span>

<span class="n">encoding</span> <span class="o">=</span> <span class="n">tiktoken</span><span class="p">.</span><span class="nf">encoding_for_model</span><span class="p">(</span><span class="sh">"</span><span class="s">gpt-3.5-turbo</span><span class="sh">"</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="sh">"""</span><span class="s">
</span><span class="gp">...</span>
<span class="sh">"""</span>

<span class="n">tokens</span> <span class="o">=</span> <span class="n">encoding</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">토큰 수:</span><span class="sh">"</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">))</span>
</pre></table></code></div></div><blockquote><p>여기서 궁금해서 좀 더 학습해보았다.</p></blockquote><p>open ai 는 BPE ( Byte Pari Encoding ) 라는 통해 텍스트를 토큰이라는 숫자 시퀸스로 변환한다. ( 놀랍게도 1994년 제안된 데이터 압축 알고리즘 )</p><p>연속적으로 가장 많이 등장한 글자 쌍을 찾아서 글자로 병합하는 방식을 수행한다. -&gt; 등장한 글자를 초기 사전으로 구성 -&gt; 연속된 두 글자를 한 글자로 병합 ( 빈도수를 기반으로 병합 )</p><p>대략 사용하며 느낀 내용으론</p><ul><li>조합은 값이 변하지 않는다. ( 1은 16, <code class="language-plaintext highlighter-rouge">cab</code>는 55893 으로 고정과 같이 )<li>최적의 서브워드 집합으로 만든다. ( 12346 이 10번 정도 등장하더라도 123, 46 으로 분리될 수도 있음 )</ul><p>일반적인 글로는 ( <a href="https://youngsu5582.life/posts/3%EA%B0%9C%EC%9B%94-%EA%B0%84%EC%9D%98-%EC%B7%A8%EC%A4%80%EC%9D%84-%EB%81%9D%EB%82%B4%EB%A9%B0/">3개월 간의 취준을 끝내며</a> , 6652 word ) 토큰이 9350개 가량 나왔다.</p><h3 id="dall-e-3"><span class="me-2">DALL-E 3</span><a href="#dall-e-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>DALL-E 3 에 대해선 <a href="https://help.openai.com/en/articles/8555480-dall-e-3-api">DALL·E 3 API</a> 에 자세히 알려준다.</p><p>요약하면</p><ul><li>Chat GPT 가 자동으로 더 상세한 프롬프트를 생성해준다. ( 사용자 대부분이 명확한 프롬프트를 생성하지 못하다 보니 )<li><code class="language-plaintext highlighter-rouge">1024*1024</code>, <code class="language-plaintext highlighter-rouge">1024*1792</code>, <code class="language-plaintext highlighter-rouge">1792*1024</code> 사이즈의 이미지만 생성 가능하다.<li>quality 를 지정 가능하다. ( hd : 높은 퀄리티, 대기 시간 +, 더 비쌈 &lt;-&gt; standard : 적당한 퀄리티,더 쌈 )</ul><p>정도가 있다.</p><p>비용은 한장당(Price per Image) 아래와 같다.</p><p><a href="https://i.imgur.com/nq5RDQV.png" class="popup img-link shimmer"><img src="https://i.imgur.com/nq5RDQV.png" alt="" loading="lazy"></a></p><p>Quality Standard, HD 를 생성해보면 위 : standard, 아래 : hd</p><p><a href="https://i.imgur.com/gmpl6CZ.png" class="popup img-link shimmer"><img src="https://i.imgur.com/gmpl6CZ.png" alt="200" loading="lazy"></a></p><p><a href="https://i.imgur.com/oEqOpgH.png" class="popup img-link shimmer"><img src="https://i.imgur.com/oEqOpgH.png" alt="200" loading="lazy"></a></p><p>-&gt; 꼭 hd만 좋다는 느낌은 아닐 수 있다. ( 각자 취향껏 선택 )</p><h3 id="credit-grants"><span class="me-2">Credit Grants</span><a href="#credit-grants" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://platform.openai.com/settings/organization/billing/credit-grants">Credit Grants</a></p><p><a href="https://i.imgur.com/dtFosoT.png" class="popup img-link shimmer"><img src="https://i.imgur.com/dtFosoT.png" alt="" loading="lazy"></a></p><p>결제한 내역이 얼마나 사용 되었는지, 언제 만료되는지에 대해 알려준다.</p><h2 id="스크립트"><span class="me-2">스크립트</span><a href="#스크립트" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">client</span> <span class="o">=</span> <span class="nc">OpenAI</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">OPENAI_API_KEY</span><span class="sh">'</span><span class="p">,</span> <span class="sh">''</span><span class="p">))</span>
</pre></table></code></div></div><p>클라이언트를 생성할때, 키가 필요하다. 매번, 이 키 값을 주입해서 실행하거나 이를 하드코딩하는건 매우 불편할 것이다. ( 깃허브 올리기에도 껄끄러움 )</p><h3 id="runner-with-envpy"><span class="me-2">runner-with-env.py</span><a href="#runner-with-envpy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="c1"># test_run.py  
</span><span class="kn">import</span> <span class="n">os</span>  
<span class="kn">import</span> <span class="n">subprocess</span>  
<span class="kn">import</span> <span class="n">sys</span>  
<span class="kn">from</span> <span class="n">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>  
<span class="kn">from</span> <span class="n">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>  
  
<span class="nf">load_dotenv</span><span class="p">(</span><span class="n">dotenv_path</span><span class="o">=</span><span class="sh">"</span><span class="s">.env</span><span class="sh">"</span><span class="p">)</span>  
<span class="n">process_path</span> <span class="o">=</span> <span class="sh">"</span><span class="s">utils/process_thumbnail_and_description.py</span><span class="sh">"</span>  
  
<span class="n">requirements_path</span> <span class="o">=</span> <span class="nc">Path</span><span class="p">(</span><span class="n">__file__</span><span class="p">).</span><span class="nf">resolve</span><span class="p">().</span><span class="n">parent</span> <span class="o">/</span> <span class="sh">"</span><span class="s">requirements.txt</span><span class="sh">"</span>  
  
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">📦 requirements.txt 설치를 시도합니다... : </span><span class="sh">"</span><span class="p">,</span> <span class="n">requirements_path</span><span class="p">)</span>  
  
<span class="k">try</span><span class="p">:</span>  
    <span class="n">subprocess</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span>  
        <span class="p">[</span><span class="n">sys</span><span class="p">.</span><span class="n">executable</span><span class="p">,</span> <span class="sh">"</span><span class="s">-m</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">pip</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">install</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">-r</span><span class="sh">"</span><span class="p">,</span> <span class="nf">str</span><span class="p">(</span><span class="n">requirements_path</span><span class="p">)],</span>  
        <span class="n">check</span><span class="o">=</span><span class="bp">True</span>  
    <span class="p">)</span>  
<span class="k">except</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">CalledProcessError</span><span class="p">:</span>  
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">❌ 패키지 설치 실패. requirements.txt가 올바른지 확인해주세요.</span><span class="sh">"</span><span class="p">)</span>  
    <span class="n">sys</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  
  
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">✅ 패키지 설치 완료.</span><span class="sh">"</span><span class="p">)</span>  
  
<span class="c1"># 3. 하위 프로세스 실행 (실제 처리 로직)  
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">🚀 스크립트를 실행합니다.</span><span class="sh">"</span><span class="p">)</span>  
<span class="k">try</span><span class="p">:</span>  
    <span class="n">subprocess</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span>  
        <span class="p">[</span><span class="n">sys</span><span class="p">.</span><span class="n">executable</span><span class="p">,</span><span class="n">process_path</span><span class="p">],</span>  
        <span class="n">check</span><span class="o">=</span><span class="bp">True</span>  
    <span class="p">)</span>  
<span class="k">except</span> <span class="n">subprocess</span><span class="p">.</span><span class="n">CalledProcessError</span><span class="p">:</span>  
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">❌ 처리 스크립트 실행 중 오류가 발생했습니다.</span><span class="sh">"</span><span class="p">)</span>  
    <span class="n">sys</span><span class="p">.</span><span class="nf">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  
  
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">✅ 처리 완료.</span><span class="sh">"</span><span class="p">)</span>
</pre></table></code></div></div><p>사용을 용이하게 하기 위해</p><ol><li>상위 프로세스에서 env 를 불러와서 환경 변수를 설정<li>의존성 설치<li>하위 프로세스 실행</ol><p>의 형식으로 다른 스크립트를 구성해두었다. 다른 프로세스로 교체 + 의존성 교체 하고 싶으면 path 만 바꾸면 된다.</p><h3 id="chat-model"><span class="me-2">Chat Model</span><a href="#chat-model" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">generate_description</span><span class="p">(</span><span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="sh">"</span><span class="s">ko</span><span class="sh">"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>  
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">description 생성을 위해 API를 보냅니다.</span><span class="sh">"</span><span class="p">)</span>  
    <span class="n">completion</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">chat</span><span class="p">.</span><span class="n">completions</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span>  
        <span class="n">model</span><span class="o">=</span><span class="sh">"</span><span class="s">gpt-4o-mini-2024-07-18</span><span class="sh">"</span><span class="p">,</span>  
        <span class="n">messages</span><span class="o">=</span><span class="p">[</span>  
            <span class="n">system_message</span><span class="p">,</span>  
            <span class="p">{</span><span class="sh">"</span><span class="s">role</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">user</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">content</span><span class="sh">"</span><span class="p">:</span> <span class="n">prompt</span><span class="p">}</span>  
        <span class="p">],</span>  
        <span class="n">temperature</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
        <span class="n">max_tokens</span><span class="o">=</span><span class="mi">350</span><span class="p">,</span>  
    <span class="p">)</span>  
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">description 생성을 위해 API가 완료 됐습니다.</span><span class="sh">"</span><span class="p">)</span>  
    <span class="n">summary</span> <span class="o">=</span> <span class="n">completion</span><span class="p">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">message</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="nf">strip</span><span class="p">()</span>  
    <span class="nf">print</span><span class="p">(</span><span class="n">completion</span><span class="p">)</span>  
    <span class="k">return</span> <span class="n">summary</span>

<span class="k">def</span> <span class="nf">generate_summary_prompt</span><span class="p">(</span><span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="sh">"</span><span class="s">ko</span><span class="sh">"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>  
    <span class="k">return</span> <span class="sa">f</span><span class="sh">"""</span><span class="s">아래 글을 </span><span class="si">{</span><span class="n">language</span><span class="si">}</span><span class="s">로 간결하게 요약하되,  
요약문의 길이는 반드시 50자 이상 100자 이하로 작성해줘.  
문장 중간이 끊기지 않도록 주의하고, 마지막에는 마침표 등으로 자연스럽게 마무리해줘.  
출력은 요약문만 작성하고, 그 외 다른 설명이나 문구는 쓰지 말아줘.  
  
글:  
</span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="sh">"""</span><span class="p">.</span><span class="nf">strip</span><span class="p">()</span>
	<span class="sb">``</span><span class="err">`</span>

<span class="n">프롬프트를</span> <span class="n">동적으로</span> <span class="n">생성하고</span><span class="p">,</span> <span class="n">요청을</span> <span class="n">보내서</span> <span class="n">받아서</span> <span class="n">사용한다</span><span class="p">.</span>
<span class="n">응답이</span> <span class="n">너무</span> <span class="n">큰</span> <span class="n">값이</span> <span class="n">되지않게</span> <span class="mi">350</span> <span class="o">+</span> <span class="n">무작위를</span> <span class="n">보장할</span> <span class="n">필요가</span> <span class="n">없기에</span> <span class="n">온도는</span> <span class="mf">0.2</span><span class="n">로</span> <span class="n">제한했다</span><span class="p">.</span>

<span class="sb">``</span><span class="err">`</span><span class="n">python</span>
<span class="n">system_message</span> <span class="o">=</span> <span class="p">{</span>  
    <span class="sh">"</span><span class="s">role</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">system</span><span class="sh">"</span><span class="p">,</span>  
    <span class="sh">"</span><span class="s">content</span><span class="sh">"</span><span class="p">:</span> <span class="p">(</span>  
        <span class="sh">"</span><span class="s">출력되는 요약문은 반드시 50자 이상 100자 이하로 작성되어야 하며, 문장이 중간에서 끊기지 않고, </span><span class="sh">"</span>  
        <span class="sh">"</span><span class="s">마지막에 마침표 등으로 자연스럽게 마무리되어야 합니다. 추가적인 설명이나 문구는 포함하지 마세요.</span><span class="sh">"</span>  
        <span class="sh">"</span><span class="s">사람이 작성하는 것과 같은 느낌으로 작성한다.</span><span class="sh">"</span>  
    <span class="p">)</span>  
<span class="p">}</span>
</pre></table></code></div></div><p>system_message 역시도 전달</p><p><code class="language-plaintext highlighter-rouge">ChatCompletion</code> 을 반환해서 이를 우리가 사용할 수 있다. ( 매우 많은 정보를 담아서 준다. )</p><p>우리가 활용할만한 요소로는</p><ul><li>created : Unix Timestamp ( EX: 1742559896 )<li>choices<code class="language-plaintext highlighter-rouge">[]</code>.message.content : AI가 생성한 텍스트 응답<li>usage.prompt_tokens : 요청에서 소비된 토큰 수<li>usage.completion_tokens : 응답에서 소비된 토큰 수<li>usage.total_tokens : 전체 소비된 토큰 수</ul><p>정도가 있다.</p><p>여기서 대략 비용을 계산해보면?</p><p>5208 token 의 input 이 발생했고, 76 token 의 ouput 이 발생했다고 가정한다.</p><ul><li><p>5208 × ($0.150 / 1,000,000) = $0.0007812</p><li><p>76 × ($0.600 / 1,000,000) = $0.0000456</p></ul><blockquote><p>Input, Ouput 비용이 각자 다르다.</p></blockquote><p>두 개를 합하면 <code class="language-plaintext highlighter-rouge">$0.00083</code> 정도가 나온다. -&gt; 환전하면 <code class="language-plaintext highlighter-rouge">₩1</code> 이다. ( 사실상, 이미지가 비용 잡아먹는 주범 ☺️ )</p><h3 id="image-model"><span class="me-2">Image Model</span><a href="#image-model" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">generate_and_save_image</span><span class="p">(</span><span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">save_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>  
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">thumbnail 생성을 위해 DALL-E API를 보냅니다.</span><span class="sh">"</span><span class="p">)</span>  
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="nf">generate</span><span class="p">(</span>  
        <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>  
        <span class="n">model</span><span class="o">=</span><span class="sh">"</span><span class="s">dall-e-3</span><span class="sh">"</span><span class="p">,</span>  
        <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>  
        <span class="n">quality</span><span class="o">=</span><span class="sh">"</span><span class="s">hd</span><span class="sh">"</span><span class="p">,</span>  
        <span class="n">size</span><span class="o">=</span><span class="sh">"</span><span class="s">1024x1024</span><span class="sh">"</span>  
    <span class="p">)</span>  
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">thumbnail 생성을 위해 DALL-E API가 완료 됐습니다.</span><span class="sh">"</span><span class="p">)</span>  
    <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>  
  
    <span class="n">image_url</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">url</span>  
    <span class="n">img_data</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">image_url</span><span class="p">).</span><span class="n">content</span>  
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="sh">'</span><span class="s">wb</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>  
        <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">img_data</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">generate_thumbnail_prompt</span><span class="p">(</span><span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>  
    <span class="k">return</span> <span class="sa">f</span><span class="sh">"""</span><span class="s">  
백엔드 기술 블로그 게시물에 사용한 깔끔하고 현대적인 썸네일 일러스트를 생성하세요.  
I NEED to test how the tool works with extremely simple prompts. DO NOT add any detail, just use it AS‑IS.  
  
📌 게시물 제목: </span><span class="sh">"</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="sh">"</span><span class="s">  
📝 게시물 설명: </span><span class="sh">"</span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="sh">"</span><span class="s">  
  
🎯 스타일 및 콘텐츠 가이드라인:  
</span><span class="gp">...</span>
<span class="sh">"""</span><span class="p">.</span><span class="nf">strip</span><span class="p">()</span>
</pre></table></code></div></div><p>설정을 살펴보면 DALL-E 3 모델 사용, size 는 최소치, quality 는 hd로 설정했다. ( 다소 비싸도, 생동감 있는 이미지 사용 위해 )</p><blockquote><p>I NEED to test how the tool works with extremely simple prompts. DO NOT add any detail, just use it AS‑IS.</p></blockquote><p>해당 구문은 위에서 말했듯 DALL-E 3는 자동으로 프롬프팅을 생성해주는데, 위 문구를 포함하면 내가 설정한 가이드라인을 기반 최대한 프롬프팅을 따라준다. - <a href="https://www.restack.io/p/openai-python-knowledge-answer-dalle-playground-cat-ai">관련 가이드</a></p><p>반환 값으로는</p><ul><li>revised_prompt : API가 내부적으로 다듬어 실제 사용된 최종 프롬프트<li>url : 생성된 이미지 파일의 pre-signed url - HTTP Client 통해 다운로드 및 조회가 가능하다.</ul><p>등이 있다.</p><p>사진당 비용이 발생하므로 실행될때마다 <code class="language-plaintext highlighter-rouge">$0.08</code> 가 나간다. ( <code class="language-plaintext highlighter-rouge">₩117</code> 생각보다 비싼거 같기도 하고, 싼거 같기도 하고…? )</p><h3 id="main"><span class="me-2">main</span><a href="#main" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="n">post</span> <span class="o">=</span> <span class="n">frontmatter</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="nf">check_exist</span><span class="p">(</span><span class="n">post</span><span class="p">,</span> <span class="sh">'</span><span class="s">description</span><span class="sh">'</span><span class="p">):</span>  
    <span class="n">prompt_for_description</span> <span class="o">=</span> <span class="nf">generate_summary_prompt</span><span class="p">(</span><span class="n">post</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>  
    <span class="n">summary</span> <span class="o">=</span> <span class="nf">generate_description</span><span class="p">(</span><span class="n">prompt_for_description</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="sh">"</span><span class="s">ko</span><span class="sh">"</span><span class="p">)</span>  
    <span class="n">post</span><span class="p">[</span><span class="sh">'</span><span class="s">description</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">summary</span>

<span class="k">if</span> <span class="ow">not</span> <span class="nf">check_exist</span><span class="p">(</span><span class="n">post</span><span class="p">,</span> <span class="sh">'</span><span class="s">image</span><span class="sh">'</span><span class="p">):</span>  
    <span class="k">if</span> <span class="ow">not</span> <span class="nf">check_exist</span><span class="p">(</span><span class="n">post</span><span class="p">,</span> <span class="sh">'</span><span class="s">title</span><span class="sh">'</span><span class="p">):</span>  
        <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sh">"</span><span class="s">The post does not have a title. Cannot generate an image prompt without a title.</span><span class="sh">"</span><span class="p">)</span>  
    <span class="n">prompt_for_image</span> <span class="o">=</span> <span class="nf">generate_thumbnail_prompt</span><span class="p">(</span><span class="n">post</span><span class="p">[</span><span class="sh">"</span><span class="s">title</span><span class="sh">"</span><span class="p">],</span> <span class="n">post</span><span class="p">[</span><span class="sh">"</span><span class="s">description</span><span class="sh">"</span><span class="p">])</span>  
  
    <span class="n">image_save_dir</span> <span class="o">=</span> <span class="n">workspace</span> <span class="o">/</span> <span class="sh">"</span><span class="s">assets</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">img</span><span class="sh">"</span> <span class="o">/</span> <span class="sh">"</span><span class="s">thumbnail</span><span class="sh">"</span>  
  
    <span class="n">image_filename</span> <span class="o">=</span> <span class="n">file_path</span><span class="p">.</span><span class="n">stem</span> <span class="o">+</span> <span class="sh">"</span><span class="s">.png</span><span class="sh">"</span>  
    <span class="n">save_path</span> <span class="o">=</span> <span class="n">image_save_dir</span> <span class="o">/</span> <span class="n">image_filename</span>  
  
    <span class="nf">generate_and_save_image</span><span class="p">(</span><span class="n">prompt_for_image</span><span class="p">,</span> <span class="n">save_path</span><span class="p">)</span>  
  
    <span class="n">relative_path</span> <span class="o">=</span> <span class="nf">str</span><span class="p">(</span><span class="n">save_path</span><span class="p">.</span><span class="nf">relative_to</span><span class="p">(</span><span class="n">workspace</span><span class="p">)).</span><span class="nf">replace</span><span class="p">(</span><span class="sh">"</span><span class="se">\\</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">/</span><span class="sh">"</span><span class="p">)</span>  
    <span class="n">post</span><span class="p">[</span><span class="sh">'</span><span class="s">image</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">path</span><span class="sh">'</span><span class="p">:</span> <span class="n">relative_path</span><span class="p">}</span>

<span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">'</span><span class="s">utf-8</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>  
    <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">frontmatter</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">post</span><span class="p">))</span>
</pre></table></code></div></div><p>frontmatter 는 일종의 메타데이터이다. 여기에, 제목 섬네일, 설명 등등을 넣을수 있다. ( 옵시디언도 이를 통해 태그 및 정보 관리 )</p><p>생성된 소개글, 이미지 값을 넣고 파일을 덮어쓴다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>description: AWS 프리티어를 활용해 EC2, RDS, ElastiCache, S3 등으로 인프라를 구성하는 과정을 상세히 설명합니다.  
  VPC 설정, 보안 그룹 구성, CodeDeploy와 Github Actions 연동 등 다양한 요소를 다루며, 비용 효율적인 방법으로 서버를  
  운영하는 방법을 제시합니다.  
image:  
  path: assets/img/thumbnail/2025-03-15-프리티어로만-배포해보기.png
</pre></table></code></div></div><p>게시글에 자동으로 description 과 image 가 추가되어있다.</p><h2 id="결론"><span class="me-2">결론</span><a href="#결론" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>파일 경로만 바꾸고 실행을 하면 자동으로 소개글 생성 및 섬네일 생성을 자동으로 처리해준다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>파일 처리 :  /Users/dragonsu/IdeaProjects/blog/_posts/2025-03-15-프리티어로만-배포해보기.md

description 생성을 위해 API를 보냅니다.
description 생성을 위해 API가 완료 됐습니다.

thumbnail 생성을 위해 DALL-E API를 보냅니다.
thumbnail 생성을 위해 DALL-E API가 완료 됐습니다.

처리 완료 : _posts/2025-03-15-프리티어로만-배포해보기.md
</pre></table></code></div></div><p>원래는 해당 요소를 Github Action 에 넣으려고 했으나</p><ul><li>파일이 추가되고, 수정되므로 변경을 커밋해야 하는 점<li>커밋을 하기 때문에 내가 글 작성하기 전 Pull을 해줘야 하는 점</ul><p>2가지 이유로 utils 함수로만 포함시켜놓았다. ( 차차, pre-commit 통해 되는지에 대해서도 접근해볼 예정이다. )</p><p>1분 30초 가량의 시간이 줄어들었다고 생각한다.</p><ul><li>웹 브라우저에 GPT를 들어가는 시간 - 10초<li>입력창에 프롬프트 복사 + 아티클 내용 넣는 시간 - 20초<li>생성 기다리는 시간 + 복사하는 시간 - 20초~30초<li>새로운 GPT Chat 사용 -&gt; 입력창에 프롬프트 복사 + 아티클 내용 넣는 시간 - 15초<li>이미지 생성 기다리는 시간 + 복사하는 시간 - 20초~30초<li>게시글에 <code class="language-plaintext highlighter-rouge">desciripton</code> 및 이미지 폴더에 저장 + <code class="language-plaintext highlighter-rouge">image/path</code> 입력하는 시간 - 20초 ( image/path 를 일일히 입력하는게 매우 귀찮다. )</ul><p>이제 우리가 하는건?</p><ul><li>스크립트에 file_path 변경 - 10초<li>스크립트 실행 - 5초</ul><p>끝! 😎</p><p>그리고, 가장 중요한건 위 동기적 단계를 비동기로 스크립트 실행하고 기다렸다 push 하면 끝난다.</p><p><code class="language-plaintext highlighter-rouge">$0.08</code> ( 현재 기준(2025.03.21), 117원의 비용 ) 으로 1분 30초를 줄였으니 매우 효율적인거 아닐까? 🙂 생각보다의 비용은 적고, 시간은 매우 단축시켜 꽤나 만족스러운 작업이였다.</p><p>해당 내용의 소개글과 섬네일 역시도 자동으로 생성되었다.</p><blockquote><p>코드 전체가 궁금하다면 <a href="https://github.com/youngsu5582/blog/blob/main/utils/process_thumbnail_and_description.py">process_thumbnail_and_description</a> 를 참고해주세요!</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EB%8F%88%EC%9C%BC%EB%A1%9C%20%EC%8B%9C%EA%B0%84%EC%9D%84%20%EC%82%AC%EA%B8%B0%20-%20%EB%B6%80%EC%A0%9C%20:%20openai%20%ED%86%B5%ED%95%9C%20%EA%B2%8C%EC%8B%9C%EA%B8%80%20%EC%86%8C%EA%B0%9C%EA%B8%80%20%EB%B0%8F%20%EC%84%AC%EB%84%A4%EC%9D%BC%20%EC%9E%90%EB%8F%99%20%EC%83%9D%EC%84%B1%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%20-%20%EC%9D%B4%EC%98%81%EC%88%98%20%EA%B0%9C%EB%B0%9C%20%EB%B8%94%EB%A1%9C%EA%B7%B8&url=https%3A%2F%2Fyoungsu5582.life%2F%2Fposts%2F%25EB%258F%2588%25EC%259C%25BC%25EB%25A1%259C-%25EC%258B%259C%25EA%25B0%2584-%25EC%2582%25AC%25EA%25B8%25B0%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyoungsu5582.life%2F%2Fposts%2F%25EB%258F%2588%25EC%259C%25BC%25EB%25A1%259C-%25EC%258B%259C%25EA%25B0%2584-%25EC%2582%25AC%25EA%25B8%25B0%2F&text=%EB%8F%88%EC%9C%BC%EB%A1%9C%20%EC%8B%9C%EA%B0%84%EC%9D%84%20%EC%82%AC%EA%B8%B0%20-%20%EB%B6%80%EC%A0%9C%20:%20openai%20%ED%86%B5%ED%95%9C%20%EA%B2%8C%EC%8B%9C%EA%B8%80%20%EC%86%8C%EA%B0%9C%EA%B8%80%20%EB%B0%8F%20%EC%84%AC%EB%84%A4%EC%9D%BC%20%EC%9E%90%EB%8F%99%20%EC%83%9D%EC%84%B1%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%20-%20%EC%9D%B4%EC%98%81%EC%88%98%20%EA%B0%9C%EB%B0%9C%20%EB%B8%94%EB%A1%9C%EA%B7%B8" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fyoungsu5582.life%2F%2Fposts%2F%25EB%258F%2588%25EC%259C%25BC%25EB%25A1%259C-%25EC%258B%259C%25EA%25B0%2584-%25EC%2582%25AC%25EA%25B8%25B0%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/en/posts/ai-tech-usage-summary-thoughts/">Summary of How to Use AI Technology Video and My Thoughts - 2025-08-20</a><li class="text-truncate lh-lg"> <a href="/en/posts/ai-tech-usage-summary-thoughts-ko/">개발자라면 꼭 알아야 할 AI 기술 활용법 영상 정리 및 간단한 사담 - 2025-08-20</a><li class="text-truncate lh-lg"> <a href="/en/posts/%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-Jackson-%EC%84%A4%EC%A0%95%EB%93%A4-%EC%A0%95%EB%A6%AC/">사용하는 Jackson의 설정 및 기능 정리 - 2025-06-17</a><li class="text-truncate lh-lg"> <a href="/en/posts/%EC%98%88%EC%99%B8-%EA%B9%8A%EA%B2%8C-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0-%EC%98%88%EC%99%B8-%EB%8F%99%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%8D%98%EC%A7%80%EA%B8%B0/">예외 깊게 살펴보기, 예외 동적으로 던지기 - 2025-05-31</a><li class="text-truncate lh-lg"> <a href="/en/posts/%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-ENUM-%EA%B0%92-%EB%8C%80%EC%9D%91,Interface-%ED%86%B5%ED%95%9C-%EC%A4%91%EB%B3%B5-%EC%BD%94%EB%93%9C-%EC%A0%9C%EA%B1%B0/">사용하지 않는 ENUM 값 대응 , Interface 를 통한 중복 코드 제거 - 2025-05-26</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9A%B0%ED%85%8C%EC%BD%94/">우테코</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%8A%A4%ED%94%84%EB%A7%81/">스프링</a> <a class="post-tag btn btn-outline-primary" href="/tags/%ED%9A%8C%EA%B3%A0/">회고</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%83%ED%97%88%EB%B8%8C/">깃허브</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94/">자바</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%83/">깃</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%BD%94%ED%8B%80%EB%A6%B0/">코틀린</a> <a class="post-tag btn btn-outline-primary" href="/tags/%ED%85%8C%EC%8A%A4%ED%8A%B8/">테스트</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/en/posts/%EB%82%98%EB%A7%8C%EC%9D%98-Workflow-%ED%8C%8C%EC%9D%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0-%EB%B6%80%EC%A0%9C-%EC%9D%B4%EC%8A%88-%EA%B8%B0%EB%B0%98-PR-%EC%9E%90%EB%8F%99-%EC%83%9D%EC%84%B1%EA%B8%B0/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1722156083" data-df="ll" > Jul 28, 2024 </time><h4 class="pt-0 my-2">나만의 Workflow 파일 만들기 ( 부제 : 이슈 기반 PR 자동 생성기 )</h4><div class="text-muted"><p>워크플로우 Run 200번의 삽질을 하며 느낀점</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/en/posts/3%EA%B0%9C%EC%9B%94-%EA%B0%84%EC%9D%98-%EC%B7%A8%EC%A4%80%EC%9D%84-%EB%81%9D%EB%82%B4%EB%A9%B0/" class="btn btn-outline-primary" aria-label="Older" ><p>3개월 간의 취준을 끝내며</p></a> <a href="/en/posts/oom-killer,-heap-memory,-heapdump/" class="btn btn-outline-primary" aria-label="Newer" ><p>oom killer, heap memory, heapdump</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://github.com/youngsu5582">이영수</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9A%B0%ED%85%8C%EC%BD%94/">우테코</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%8A%A4%ED%94%84%EB%A7%81/">스프링</a> <a class="post-tag btn btn-outline-primary" href="/tags/%ED%9A%8C%EA%B3%A0/">회고</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%83%ED%97%88%EB%B8%8C/">깃허브</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94/">자바</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%83/">깃</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%BD%94%ED%8B%80%EB%A6%B0/">코틀린</a> <a class="post-tag btn btn-outline-primary" href="/tags/%ED%85%8C%EC%8A%A4%ED%8A%B8/">테스트</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'youngsu5582/blog', 'data-repo-id': 'R_kgDOOI2eig', 'data-category': 'Post', 'data-category-id': 'DIC_kwDOOI2eis4Cob3Y', 'data-mapping': 'pathname', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
