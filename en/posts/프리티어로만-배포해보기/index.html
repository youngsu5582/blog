<!doctype html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="프리티어로만 배포해보기" /><meta name="author" content="이영수" /><meta property="og:locale" content="ko" /><meta name="description" content="AWS 프리티어를 활용해 EC2, RDS, ElastiCache, S3 등으로 인프라를 구성하는 과정을 상세히 설명합니다. VPC 설정, 보안 그룹 구성, CodeDeploy와 Github Actions 연동 등 다양한 요소를 다루며, 비용 효율적인 방법으로 서버를 운영하는 방법을 제시합니다." /><meta property="og:description" content="AWS 프리티어를 활용해 EC2, RDS, ElastiCache, S3 등으로 인프라를 구성하는 과정을 상세히 설명합니다. VPC 설정, 보안 그룹 구성, CodeDeploy와 Github Actions 연동 등 다양한 요소를 다루며, 비용 효율적인 방법으로 서버를 운영하는 방법을 제시합니다." /><link rel="canonical" href="https://youngsu5582.life//posts/%ED%94%84%EB%A6%AC%ED%8B%B0%EC%96%B4%EB%A1%9C%EB%A7%8C-%EB%B0%B0%ED%8F%AC%ED%95%B4%EB%B3%B4%EA%B8%B0/" /><meta property="og:url" content="https://youngsu5582.life//posts/%ED%94%84%EB%A6%AC%ED%8B%B0%EC%96%B4%EB%A1%9C%EB%A7%8C-%EB%B0%B0%ED%8F%AC%ED%95%B4%EB%B3%B4%EA%B8%B0/" /><meta property="og:site_name" content="{{ site.data.l10n.title }}" /><meta property="og:image" content="https://youngsu5582.life//assets/img/thumbnail/2025-03-15-프리티어로만-배포해보기.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-03-09T15:00:00+09:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://youngsu5582.life//assets/img/thumbnail/2025-03-15-프리티어로만-배포해보기.png" /><meta property="twitter:title" content="프리티어로만 배포해보기" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"이영수"},"dateModified":"2025-03-09T15:00:00+09:00","datePublished":"2025-03-09T15:00:00+09:00","description":"AWS 프리티어를 활용해 EC2, RDS, ElastiCache, S3 등으로 인프라를 구성하는 과정을 상세히 설명합니다. VPC 설정, 보안 그룹 구성, CodeDeploy와 Github Actions 연동 등 다양한 요소를 다루며, 비용 효율적인 방법으로 서버를 운영하는 방법을 제시합니다.","headline":"프리티어로만 배포해보기","image":"https://youngsu5582.life//assets/img/thumbnail/2025-03-15-프리티어로만-배포해보기.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://youngsu5582.life//posts/%ED%94%84%EB%A6%AC%ED%8B%B0%EC%96%B4%EB%A1%9C%EB%A7%8C-%EB%B0%B0%ED%8F%AC%ED%95%B4%EB%B3%B4%EA%B8%B0/"},"url":"https://youngsu5582.life//posts/%ED%94%84%EB%A6%AC%ED%8B%B0%EC%96%B4%EB%A1%9C%EB%A7%8C-%EB%B0%B0%ED%8F%AC%ED%95%B4%EB%B3%B4%EA%B8%B0/"}</script><title>프리티어로만 배포해보기 | {{ site.data.l10n.title }}</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="{{ site.data.l10n.title }}"><meta name="application-name" content="{{ site.data.l10n.title }}"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-GDSPGC31HX"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-GDSPGC31HX'); }); </script><meta http-equiv="Content-Language" content="en"><link rel="canonical" href="https://youngsu5582.life//en/posts/:title/"/><link rel="alternate" hreflang="ko" href="https://youngsu5582.life//posts/:title/"/><link rel="alternate" hreflang="x-default" href="https://youngsu5582.life//en/posts/:title/"/><link rel="alternate" hreflang="en" href="https://youngsu5582.life//en/posts/:title/"/><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/en/" id="avatar" class="rounded-circle"><img src="/assets/img/avatar.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/en/">{{ site.data.l10n.title }}</a><p class="site-subtitle fst-italic mb-0">{{ site.data.l10n.tagline }}</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/en/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/en/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/en/articles/" class="nav-link"> <i class="fa-fw "></i> <span>ARTICLES</span> </a><li class="nav-item"> <a href="/en/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/youngsu5582" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['joyson5582','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/en/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/%EC%98%81%EC%88%98-%EC%9D%B4-b78498347/" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="https://www.rallit.com/hub/resumes/988543/%EC%9D%B4%EC%98%81%EC%88%98" aria-label="resume" target="_blank" rel="noopener noreferrer" > <i class="fas fa-file-alt"></i> </a> <a href="https://comet-pram-809.notion.site/185365707b6580859ec5ec052f2f6730" aria-label="portfolio" target="_blank" rel="noopener noreferrer" > <i class="fas fa-laptop-code"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/en/">Home</a> </span> <span>프리티어로만 배포해보기</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="language-switcher-container"> <a href=" /posts/%ED%94%84%EB%A6%AC%ED%8B%B0%EC%96%B4%EB%A1%9C%EB%A7%8C-%EB%B0%B0%ED%8F%AC%ED%95%B4%EB%B3%B4%EA%B8%B0/" class="lang-btn">한국어</a><a href="#" class="lang-btn active">English</a></div><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>프리티어로만 배포해보기</h1><p class="post-desc fw-light mb-4">AWS 프리티어를 활용해 EC2, RDS, ElastiCache, S3 등으로 인프라를 구성하는 과정을 상세히 설명합니다. VPC 설정, 보안 그룹 구성, CodeDeploy와 Github Actions 연동 등 다양한 요소를 다루며, 비용 효율적인 방법으로 서버를 운영하는 방법을 제시합니다.</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1741500000" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Mar 9, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/assets/img/thumbnail/2025-03-15-프리티어로만-배포해보기.png" class="popup img-link preview-img shimmer"><img src="/assets/img/thumbnail/2025-03-15-프리티어로만-배포해보기.png" alt="Preview Image" width="1200" height="630" loading="lazy"></a></div><div class="d-flex justify-content-between"> <span> By <em> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="4236 words" > <em>23 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">프리티어로만 배포해보기</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">프리티어로만 배포해보기</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog> <br><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/%EC%9D%B8%ED%94%84%EB%9D%BC/">인프라</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/amplify/" class="post-tag no-text-decoration" >amplify</a> <a href="/tags/aws/" class="post-tag no-text-decoration" >aws</a> <a href="/tags/ec2/" class="post-tag no-text-decoration" >ec2</a> <a href="/tags/https/" class="post-tag no-text-decoration" >https</a></div><div class="content"><blockquote><p>해당 내용은 프리티어로 AWS 인프라를 구축한 내용을 다룹니다. <code class="language-plaintext highlighter-rouge">RDS</code>,<code class="language-plaintext highlighter-rouge">EC2</code>,<code class="language-plaintext highlighter-rouge">ElastiCache</code>,<code class="language-plaintext highlighter-rouge">CodeDeploy</code>,<code class="language-plaintext highlighter-rouge">Chatbot</code>,<code class="language-plaintext highlighter-rouge">S3</code>,<code class="language-plaintext highlighter-rouge">Amplify</code> 를 이용합니다.</p></blockquote><h2 id="aws-freetier-list"><span class="me-2">AWS FreeTier List</span><a href="#aws-freetier-list" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>아마존은 생각보다 매우 많은 서비스를 무료로 1년동안 제공해준다. ( 2년 정도면, 얼마나 좋을까.. )</p><p><a href="https://aws.amazon.com/ko/free/?all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc&amp;awsf.Free%20Tier%20Types=*all&amp;awsf.Free%20Tier%20Categories=*all">프리 티어 리스트</a></p><p>요소를 추려보면</p><ul><li><p>EC2 750시간 - t3.micro, 12개월 무료</p><li>RDS 750시간 - MySQL, PostgreSQL, 12개월 무료<li>ElastiCache 750시간 - cache.t3.micro<li>DynamoDB 25GB - 월별 2억 개 요청 처리 가능한 용량<li><p>S3 - 5GB, GET 요청 20,000건, PUT 요청 2,000건</p><li>CloudWatch 10- API 요청 100만건, 로그 데이터 수집 5GB 및 아카이브 5GB<li>CloudFront 1TB - HTTP,HTTPS 요청 100만건<li><p>Amplify - 매월 1,000분의 빌드 시간, 매월 15GB 제공, 매월 요청 50만 건</p><li>CodBuild 100분 -  arm1.small 구축 시간 100분<li><p>CodePipeline 1 - 월별 활성화 파이프라인 1개</p><li>Lambda - 매월 100만건, 최대 320만 초<li>SNS - 매월 100만건, HTTP/HTTPS 전송 10만건, 이메일 전송 1000건</ul><p>정도가 있다.</p><blockquote><p>물론, 다른 요소들도 어마하게 많지만 백엔드 개발자가 간단하게 접근할 수 있는 요소들로만 적어놨습니다</p></blockquote><blockquote><p>여기서, CodeBuild &amp; CodePipeline 은 사용하지 않고 Gihutb Action &amp; CodeDeploy를 사용합니다. ( 100분은 생각보다 매우 짧기 때문 )</p></blockquote><ul><li>서버 : EC2<li>데이터베이스 : RDS, ElastiCache<li>빌드 저장 : S3<li>프론트 CI &amp; CD : Amplify<li>백엔드 CI &amp; CD : Github Action, CodeDeploy</ul><p>까지가 이번 구성안이다.</p><p>아래 구성 순서는</p><p><code class="language-plaintext highlighter-rouge">VPC -&gt; Database(RDS,ElastCache) -&gt; Amplify -&gt; EC2 -&gt; CodeDeploy</code></p><p>순으로 구성한다.</p><h2 id="vpc"><span class="me-2">VPC</span><a href="#vpc" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>구성에 혼선이 안생기게 VPC 부터 생성하는게 편한거 같다.</p><p>VPC : 가상 프라이빗 네트워크, 우리의 인프라를 어느 네트워크 및 어떻게 배치할지를 결정</p><p>VPC 등 선택</p><ul><li>이름 : lotto-prod-vpc<li>IPv4 CIDR : 10.0.0./16<li>가용 영역 : 1<li>퍼블릭 서브넷 : 1<li>프라이빗 서브넷 : 2</ul><blockquote><p>프라이빗을 두개로 하는 이유는 RDS는 무조건 AZ2개를 보장해야 한다. - 가용성</p></blockquote><blockquote><p>그리고, <code class="language-plaintext highlighter-rouge">DNS 확인 활성화</code>, <code class="language-plaintext highlighter-rouge">DNS 호스트 이름 활성화</code> 두개를 설정해야 한다. -&gt; AWS EC2는 DNS 가 없으면, 퍼블릭 IP라도 외부랑 통신을 못하기 때문이다. - 도메인 이름을 IP 주소로 변환 실패 ( 여기서 1시간,2시간 정도 헤맴 )</p></blockquote><h3 id="서브넷-그룹"><span class="me-2">서브넷 그룹</span><a href="#서브넷-그룹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>이름 : lotto-prod-subnet-private-group<li>vpc-id : lotto-prod-vpc</ul><blockquote><p>ElasticCache 에서 사용하기 위해 생성</p></blockquote><h3 id="security-group"><span class="me-2">Security Group</span><a href="#security-group" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>EC2 - RDS, Cache 에서 사용하기 위한 인바운드 아웃바운드를 설정한다.</p><ul><li>이름 : ec2-to-cache-outbound-group<li>vpic-id : lotto-prod-vpc<li>아웃바운드 : 6379, 0.0.0.0 지정<li>태그 : project-lotto</ul><p>=&gt; EC2에 지정</p><ul><li>이름 : ec2-to-cache-inbound-group<li>vpic-id : lotto-prod-vpc<li>인바운드 : 6379, 0.0.0.0 지정<li>태그 : project-lotto</ul><p>=&gt; ElasticCache에 지정</p><ul><li>이름 : ec2-to-rds-outbound-group<li>vpic-id : lotto-prod-vpc<li>아웃바운드 : 3306, 0.0.0.0 지정<li>태그 : project-lotto</ul><p>=&gt; EC2에 지정</p><ul><li>이름 : ec2-to-rds-inbound-group<li>vpic-id : lotto-prod-vpc<li>인바운드 : 3306, 0.0.0.0 지정<li>태그 : project-lotto</ul><p>=&gt; RDS에 지정</p><ul><li>이름 : ec2-public-group<li>vpic-id : lotto-prod-vpc<li>인바운드 : 443,22,80 지정</ul><h2 id="rds"><span class="me-2">RDS</span><a href="#rds" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>요새는, RDS 도 프리티어 대상으로 간편하게 설정할 수 있는 템플릿이 제공되어 있다. 내리면 위와같이 선택할 수 있는 요소들이 제공되므로 설명은 생략한다.</p><ul><li>표준생성<li>MySQL<li>프리티어<li>DB 인스턴스 식별자 : lotto-database-prod<li>마스터 사용자 이름 : lotto_user<li>자체 관리 : 암호 자동 생성<li>스토리지 자동 활성화 X<li>EC2 컴퓨팅 리소스에 연결 안함<li>vpc : lotto-prod-vpc<li>보안그룹 : ec2-to-rds-inbound-group<li>가용영역 : ap-northeast-2a<li>로그 내보내기 : 에러 로그, 느린 쿼리 로그<li>초기 데이터베이스 : lotto</ul><h2 id="elasticcache"><span class="me-2">ElasticCache</span><a href="#elasticcache" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>해당 부분에서 Redis 가 아닌 Valkey 를 사용했는데 아래의 이유에서 선택했다.</p><ol><li>AWS에서 30~40% 가량 저렴하다고 홍보를 강력하게 한다.<li>Reids의 고가용성 클러스터나 검증된 안정성이 필요 없다.<li>Redis 의 오픈소스를 기반으로 시작했기에, 엄청난 부분들이 유사하다.</ol><p>해당 부분도 RDS와 같이 선택할 수 있는 요소들이 제공되므로 설명은 생략한다.</p><ul><li>ElasticValKey 사용<li>자체 캐시 설계 -&gt; 클러스터 캐시<li>클러스터 모드 비활성화<li>위치 : AWS 클라우드, 다중 AZ 사용 X, 자동 장애 조치 사용 X<li>노드 유형 : cache.t3.micro<li>복제본 : 0<li>자동 백업 사용 X<li>보안그룹 : ec2-to-cache-inbound-group<li>로그 : 느린 로그 사용 ( JSON, CloudWatch Logs )<li>태그 : project-lotto</ul><blockquote><p>여기서, VPC - 서브넷 그룹 - 서브넷을 필요로 한다.</p></blockquote><ul><li>백업 사용 X</ul><p>서버가 잘 구동됐는지 확인하고 싶다면 VPC 내부 ( 즉, EC2 구동해서 내부 ) 에서</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nc -zv &lt;DB_HOSTNAME&gt; &lt;DB_PORT&gt;
</pre></table></code></div></div><p>요청을 보내면</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Connection to &lt;DB_HOSTNAME&gt; (&lt;DB_IP&gt;) &lt;DB_PORT&gt; port [tcp/redis] succeeded!
</pre></table></code></div></div><p>라고 응답을 해준다. 이를 통해, <code class="language-plaintext highlighter-rouge">DB가 제대로 구동되어 LISTEN</code> 하는지, <code class="language-plaintext highlighter-rouge">인스턴스간 인바운드-아웃바운드 연결</code> 이 되었는지를 알 수 있다.</p><h2 id="amplify"><span class="me-2">Amplify</span><a href="#amplify" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>프론트엔드 앱을 빌드부터 배포까지 완벽하게 이어준다. 사실, 이번에 처음 제대로 알았는데 매우 좋은 기능들이 많이 있었다.</p><ul><li>Github 선택<li>레포지토리 선택, 브랜치 선택<li>모노 레포지토리 선택 ( 프론트만 있는게 아니라, 같이 있을 시 )<li>프론트엔드 빌드 명령어 지정<li>환경 변수 설정</ul><p>Github 에 Push 를 한다면, 웹훅을 받아서 빌드 및 배포가 진행된다.</p><p><a href="https://i.imgur.com/aOPJ8rn.png" class="popup img-link shimmer"><img src="https://i.imgur.com/aOPJ8rn.png" alt="" loading="lazy"></a></p><p>빌드와 배포까지 시간도 2분 20초? 가량으로 매우 빨리 끝난다. ( 캐싱 비활성화도 동작 확인 )</p><blockquote><p>Amplify 에는 WAF가 있는데 국가 제한, 취약점 및 악의점 공격 보호에 대한 요소들도 있다. 필수적인 기능이긴 하나, 프리티어가 아니므로 패스 ( 2025.03.08 기준 )</p></blockquote><p><a href="https://i.imgur.com/59z8ZFs.png" class="popup img-link shimmer"><img src="https://i.imgur.com/59z8ZFs.png" alt="" loading="lazy"></a></p><p>우리 서버로 어떤 요청들이 들어오는지도 쉽게 다운받아서 조회 가능하다.</p><h2 id="ec2"><span class="me-2">EC2</span><a href="#ec2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>인스턴스 설정은</p><ul><li>아키텍처 : 64비트(x86) - 프리티어 제공 범주가 현재 고정<li>인스턴스 유형 : t2.micro - 1vCPU, 1GiB 메모리<li>SSH 트래픽 허용 : 위치무관<li>인터넷에서 HTTP/HTTPS 트래픽 허용<li><p>스토리지 구성 : 10GiB, gp3 루트 볼륨</p><li>태그 설정 : profile - prod, project - lotto<li>보안 그룹 : ec2-public-group</ul><h3 id="사전-설치"><span class="me-2">사전 설치</span><a href="#사전-설치" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>서버 실행을 위해 초기 자바 및 Agent 설치를 해줘야 한다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c"># JDK 설치 디렉터리 생성</span>
<span class="nb">sudo mkdir</span> /usr/lib/jvm

wget https://download.java.net/java/GA/jdk21.0.2/f2283984656d49d69e91c558476027ac/13/GPL/openjdk-21.0.2_linux-x64_bin.tar.gz <span class="nt">-O</span> /tmp/openjdk-21.0.2_linux-x64_bin.tar.gz

<span class="c"># 압축 해제</span>
<span class="nb">sudo tar </span>xfvz /tmp/openjdk-21.0.2_linux-x64_bin.tar.gz <span class="nt">--directory</span> /usr/lib/jvm
<span class="nb">rm</span> <span class="nt">-f</span> /tmp/openjdk-21.0.2_linux-x64_bin.tar.gz

<span class="c"># 대안 설정</span>
<span class="nb">sudo </span>update-alternatives <span class="nt">--install</span> /usr/bin/java java /usr/lib/jvm/jdk-21.0.2/bin/java 100
<span class="nb">sudo </span>update-alternatives <span class="nt">--set</span> java /usr/lib/jvm/jdk-21.0.2/bin/java

<span class="c"># 환경 변수 설정</span>
<span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/jdk-21.0.2
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/usr/lib/jvm/jdk-21.0.2/bin

<span class="c"># 확인</span>
java <span class="nt">-version</span>

</pre></table></code></div></div><p>자신의 버전과 벤더사에 맞게 설치를 하고, 환경 변수 설정을 해주면 된다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c">#!/usr/bin/env bash</span>

<span class="nb">sudo </span>apt-get update <span class="nt">-y</span>
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> ruby
<span class="nb">cd</span> /home/ubuntu
wget https://aws-codedeploy-ap-northeast-2.s3.amazonaws.com/latest/install
<span class="nb">chmod</span> +x ./install
<span class="nb">sudo</span> ./install auto
</pre></table></code></div></div><p>그리고, CodeDeploy Agent 를 설치하고, 실행한다.</p><p>추가로, EC2 는 CodeDeploy Agent 를 실행할 권한이 있어야 한다.</p><p>IAM 정책에서 <code class="language-plaintext highlighter-rouge">정책명</code> 을 만들고</p><p><code class="language-plaintext highlighter-rouge">EC2InstanceConnect</code>, <code class="language-plaintext highlighter-rouge">AWSCodeDeployFullAccess</code>, <code class="language-plaintext highlighter-rouge">AmazonS3FullAccess</code> 권한을 주자.</p><p>S3에 있는 파일에 접근해서 CodeDeploy 가 자동으로 배포를 진행해준다. ( InstanceConnect 는 편의용 ) ( S3 권한이 두렵다면, GET 하는 권한만 줘도 상관없다. )</p><p>작업 -&gt; 보안 -&gt; IAM 역할 수정 -&gt; 우리가 만든 역할로 설정</p><h3 id="스왑-메모리"><span class="me-2">스왑 메모리</span><a href="#스왑-메모리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>t2g는 RAM이 1.0 GiB이다. 매우 절망적이므로, 스왑 메모리가 필요하다.</p><ol><li>sudo fallocate -l 2G /swapfile<li>chmod 600 /swapfile<li>sudo mkswap /swapfile<li>sudo swapon /swapfile<li><div class="table-wrapper"><table><tbody><tr><td>echo ‘/swapfile none swap sw 0 0’<td>sudo tee -a /etc/fstab ( 리부팅 되어도, 자동으로 설정되게 지정 )</table></div></ol><blockquote><p><code class="language-plaintext highlighter-rouge">free -h</code> 로 스왑 메모리 활성화 됐는지 확인할 수 있다.</p></blockquote><h3 id="도메인-구매"><span class="me-2">도메인 구매</span><a href="#도메인-구매" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>자신이 고정적인 IP나 <code class="language-plaintext highlighter-rouge">amplify.app</code> 으로 사이트를 배포하기 싫다면? 도메인을 구매하자. 어차피, 1년 신규 금액은 정말 얼마 안한다.</p><p><a href="https://i.imgur.com/lze5PlG.png" class="popup img-link shimmer"><img src="https://i.imgur.com/lze5PlG.png" alt="" loading="lazy"></a></p><p>멋을 위해서 2500~10000원 정도는 포기할 수 있지 않을까..</p><p>호스팅을 구매하려면, 관리자 정보를 입력해야 하는데 <code class="language-plaintext highlighter-rouge">whois</code> 나 DNS 서버에 이 사이트의 소유자가 누구인지를 올라가는 것이니까 제대로 적자. 이제, 서버의 주소를 자기가 맞게 등록하면 된다.</p><p><a href="https://i.imgur.com/ETELcKD.png" class="popup img-link shimmer"><img src="https://i.imgur.com/ETELcKD.png" alt="" loading="lazy"></a></p><h3 id="amplify--https"><span class="me-2">Amplify &amp; HTTPS</span><a href="#amplify--https" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>사용자 지정 도메인에 우리 도메인을 추가하면, 자동으로 SSL 생성을 해준다.</p><p>호스팅 - 사용자 지정 도메인 - 도메인 추가로 들어가서</p><ol><li>자기 루트 도메인을 입력하자.<li>호스팅 영역 수동 구성을 누른다. ( Route53 은 사용하지 않고 직접 구성한다. - 추가 비용 )<li>호스팅 서비스에 등록위한 <code class="language-plaintext highlighter-rouge">호스트 이름</code>,<code class="language-plaintext highlighter-rouge">형식</code>,<code class="language-plaintext highlighter-rouge">데이터</code> 를 알려주고 하위 도메인도 가르키도록 <code class="language-plaintext highlighter-rouge">cloudfront</code> 데이터를 제공해준다.</ol><blockquote><p>이때, 주의할 점은 자신이 알아서 마지막 DNS 는 적절히 추출해야 한다. 예를 들어, 나는 <code class="language-plaintext highlighter-rouge">lotto.web.younsgu5582.life</code> 와 같이 복사를 하라고 안내해줬으나 호스팅 서버에 넣을때는 <code class="language-plaintext highlighter-rouge">lotto.web</code> 까지만 넣어야 했다.</p></blockquote><p>그 후, DNS 에 대한 정보들이 퍼지고 인증이 완료되면 끝난다!</p><p><code class="language-plaintext highlighter-rouge">nslookup &lt;도메인명&gt;</code> <code class="language-plaintext highlighter-rouge">whois &lt;도메인명&gt;</code></p><p>두개를 통해서도 도메인이 제대로 등록되어있는지 및 정보가 잘 등록됐는지 확인 가능하다.</p><h3 id="nginx--certbot"><span class="me-2">Nginx &amp; Certbot</span><a href="#nginx--certbot" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>서버에서도, 그냥 받는게 아닌 HTTPS 를 받기 위해 적용한다. ( HTTP 는 일반적으로, HTTPS &lt;-&gt; HTTP 요청 시 <code class="language-plaintext highlighter-rouge">Mixed Contents</code> 에러를 발생시켜 요청이 거부된다. )</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>sudo apt-get update
sudo apt-get install certbot python3-certbot-nginx
sudo certbot --nginx -d &lt;API 서버 주소&gt;
</pre></table></code></div></div><p>y/n 를 입력하라고 하면 <code class="language-plaintext highlighter-rouge">y -&gt; y -&gt; n</code> ( 마지막은, 이메일 기반 소식 전해준다는 내용 ) 을 입력한다.</p><p>이런 과정을 통해, 인증서를 발급 받아서 <code class="language-plaintext highlighter-rouge">fullchain.pem</code>, <code class="language-plaintext highlighter-rouge">privkey.pem</code> 을 받는다. 그리곤, nginx 에서 <code class="language-plaintext highlighter-rouge">ssl_certificate</code> 와 <code class="language-plaintext highlighter-rouge">ssl_certificate_key</code> 를 맞게 설정하면 된다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre>server {
    listen 443 ssl;
    server_name &lt;API 서버 주소&gt;;

    ssl_certificate &lt;fullchain.pem&gt;
    ssl_certificate_key &lt;privkey.pem&gt;

    # (옵션) SSL 설정 강화
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    location / {
        proxy_pass http://127.0.0.1:8080;
        # 혹은 root /var/www/html; 등 원하는 백엔드/정적 디렉토리
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        }
}

server {
    listen 80;
    server_name &lt;API 서버 주소&gt;;
    return 301 https://$host$request_uri;
}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>sudo nginx -t
sudo systemctl restart nginx
</pre></table></code></div></div><p>설정을 적용하기 위해 재시작 후, API 서버 주소로 보내는데 응답하는지 확인하면 끝난다.</p><h2 id="code-deploy"><span class="me-2">Code Deploy</span><a href="#code-deploy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>CodeBuild 또는 CodePipeline 을 사용하지 않았다.</p><p>우선, 한달에 100분이면 생각보다 너무 짧다고 느꼈다. 백엔드 배포가 일반적으로 2분,3분 정도가 소모되는데 ( 테스트를 제외하면 더 빠르긴 함 ) 대략 50~60 건이면 추가적인 비용이 발생한다. -&gt; 그러기에, CodePipeline 도 사용하지 못한다.</p><p>대신, Github Action 에서 빌드 -&gt; S3 업로드 -&gt; Deploy 실행을 담당하기로 했다.</p><p>애플리케이션을 생성하자.</p><ul><li>애플리케이션 명 : lotto-code-deploy<li>컴퓨팅 플랫폼 : EC2/온프레미스</ul><h3 id="배포-그룹-생성"><span class="me-2">배포 그룹 생성</span><a href="#배포-그룹-생성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>배포 그룹 명 : lotto-prod-group<li>역할 생성 : 키(profile), 값(prod)<li>AWS Systems Manager 사용한 에이전트 구성<li>배포 구성 : AllAtOnce<li>로드밸런서 비활성화</ul><blockquote><p>하나의 서버를 사용하므로 배포 전략과 로드밸런서는 고려하지 않는다.</p></blockquote><h2 id="사용자"><span class="me-2">사용자</span><a href="#사용자" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Github Action 에서 실행하기 위한 사용자를 만든다.</p><ul><li>사용자 이름 : lotto-user<li>S3FullAccess, CodeDeployFullAccess</ul><p>그리고, 액세스 키를 생성해서 액세스 키와 시크릿 키를 준비하자. ( - 사용 사례 : 로컬 코드 )</p><h3 id="github-action"><span class="me-2">Github Action</span><a href="#github-action" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre>- name: Create deploy package  
  run: |  
    zip -r deployment-package.zip build/libs/spring-lotto.jar appspec.yml deploy  
  
- name: Configure AWS credentials  
  uses: aws-actions/configure-aws-credentials@v4  
  with:  
    aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}  
    aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}  
    aws-region: ${{ secrets.AWS_REGION }}  
  
- name: Upload to S3  
  run: |  
    aws s3 cp deployment-package.zip s3://${{ secrets.S3_BUCKET_NAME }}/deployment-package.zip  
  
- name: Deploy to CodeDeploy  
  run: |  
    aws deploy create-deployment \  
      --application-name ${{ secrets.APPLICATION_NAME }} \  
      --deployment-group-name ${{ secrets.DEPLOYMENT_GROUP_NAME }} \  
      --s3-location bucket=${{ secrets.S3_BUCKET_NAME }},key=deployment-package.zip,bundleType=zip
</pre></table></code></div></div><ol><li>빌드 파일 및 필요한 스크립트와 appspec.yml 을 압축한다.<li>Action에서 Crendtials 를 통해 인증을 받는다.<li>압축한 파일을 S3에 올린다.<li>S3에 저장되어 있는 파일을 기반으로 Deploy 를 실행한다.</ol><h3 id="github-action-secret"><span class="me-2">Github Action Secret</span><a href="#github-action-secret" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>AWS_ACCESS_KEY_ID 
AWS_SECRET_ACCESS_KEY
AWS_REGION : ap-northeast-2

APPLICATION_NAME : lotto-code-deploy
DEPLOYMENT_GROUP_NAME : lotto-prod-group
S3_BUCKET_NAME : spring-lotto-build-bucket
</pre></table></code></div></div><p>이와같이 Secret 에 값들을 넣어서 동작하는지 확인하면 된다.</p><h2 id="aws-chatbot"><span class="me-2">AWS Chatbot</span><a href="#aws-chatbot" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>배포를 매번 들어가서 확인하면 몹시 번거롭다. 우리는, AWS Chatbot 을 활용한다.</p><p><a href="https://i.imgur.com/cGyfK6m.png" class="popup img-link shimmer"><img src="https://i.imgur.com/cGyfK6m.png" alt="" loading="lazy"></a></p><p>이 역시도 추가 비용 없이 무료이다. 현재는, <code class="language-plaintext highlighter-rouge">Q Developer in chat applications</code> 로 이름이 변경됐다.</p><p>새 클라이언트 구성 -&gt; Slack 선택 -&gt; 사용하려는 채널 권한을 요청한다.</p><p>그리고, 채널 구성을 하자.</p><ul><li>Slack 채널 : 받을 채널 지정<li>역할 이름 : aws-chatbot-slack-codedeploy-role<li>정책 템플릿 : 알림 권한, 읽기 전용 명령 권한<li>알림 : 선택 X ( 어차피, 슬랙으로 요청을 보내는 게 주이므로, SMS 같은 추가적 요소가 필요없다. )<li>가드 레일 정책 : CodeDeployFullAccess</ul><p>그리고, 채널에 <code class="language-plaintext highlighter-rouge">/invite @Amazon Q</code> 를 통해 초대하자.</p><h3 id="알람-규칙-in-codedeploy"><span class="me-2">알람 규칙 in CodeDeploy</span><a href="#알람-규칙-in-codedeploy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>CodeDeploy에서도 추가적인 설정을 해줘야 한다.</p><p>애플리케이션 - 설정에 들어가서 알람 규칙을 생성하자.</p><ul><li>세부 정보 유형 : 가득참<li>알람 트리거 하는 이벤트 : Succeeded, Failed<li>구성된 대상 : AWS Chatbot<li>ARN : 위에서 만든 Chatbot ARN</ul><p><a href="https://i.imgur.com/fiYyTX6.png" class="popup img-link shimmer"><img src="https://i.imgur.com/fiYyTX6.png" alt="" loading="lazy"></a></p><p>이와같이 배포 권한을 받으면 성공이다.</p><hr /><h2 id="결론"><span class="me-2">결론</span><a href="#결론" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://i.imgur.com/AqsnYcf.png" class="popup img-link shimmer"><img src="https://i.imgur.com/AqsnYcf.png" alt="" loading="lazy"></a></p><p>생각보다, 그럴듯하게 완성 됐다. 🙂 ( CI,CD + DB + HTTPS 등등 )</p><p>비용 예상도를 보면?</p><p><a href="https://i.imgur.com/ewa2Mlz.png" class="popup img-link shimmer"><img src="https://i.imgur.com/ewa2Mlz.png" alt="" loading="lazy"></a></p><p>3$도 안되는걸 볼 수 있다. 앞으로, SNS 나 Lambda 부분을 추가로 도입해나갈 거 같다.</p><p>사이드 프로젝트를 배포하는걸 비용 및 귀찮음 때문에 주저했었는데 의식적인 프리티어 구성이면 매우 저렴한 금액이다. ( 오히려, 귀찮아서 방지해놓은 EC2 가 프리티어 적용 안되어서 더 비쌌다. )</p><p>한번쯤은 AWS 가 제공해주는 모든 기능들을 누려보는 것도 좋은거 같다. 아래는 시도하며 겪은 시행착오들이다.</p><h3 id="팁"><span class="me-2">팁</span><a href="#팁" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>네트워크 인터페이스는 사용하는 요소들이 다 분리가 되어야 삭제 가능하다. ( RDS, CACHE 네트워크 인터페이스 등 )<li>보안그룹이 서로를 참조하면, 하나에서 해제 해줘야 삭제 가능하다.</ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>scp -i &lt;key-pem&gt; &lt;전송할 파일&gt; &lt;사용자&gt;@&lt;서버 주소&gt;:&lt;저장할 파일명 및 경로&gt;
</pre></table></code></div></div><p>를 통해 필요한 파일을 전송하자.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>mysql -h &lt;RDS-endpoint&gt; -u &lt;db-username&gt; -p &lt; /home/ubuntu/big_inserts.sql
</pre></table></code></div></div><p>파일을 옮기고, DB에 전송 가능하다.</p><ul><li><code class="language-plaintext highlighter-rouge">/opt/codedeploy-agent</code> 에 CodeDeploy 요소들이 위치한다.<ul><li>여기에 배포 ID 들에 해당하는 폴더가 위차한다. ( 5개 정도 )<li>폴더 내 <code class="language-plaintext highlighter-rouge">deployment-archive</code> 에 빌드 시도하는 파일들이 존재한다.</ul><li>왠만하면, 예산을 미리 세워놓자.</ul><p><a href="https://i.imgur.com/U1Aj7Dh.png" class="popup img-link shimmer"><img src="https://i.imgur.com/U1Aj7Dh.png" alt="" loading="lazy"></a></p><p>임계치를 지정하고, 도달 시 이메일을 받을 수 있다. 추가적인 설정 없이 간단하게도 현재 금액이 초과안하는지 받을 수 있다. ( 50% &amp; 80% 로 지정해놨다. )</p></div><div class="post-tail-wrapper text-muted"><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%ED%94%84%EB%A6%AC%ED%8B%B0%EC%96%B4%EB%A1%9C%EB%A7%8C%20%EB%B0%B0%ED%8F%AC%ED%95%B4%EB%B3%B4%EA%B8%B0%20-%20%7B%7B%20site.data.l10n.title%20%7D%7D&url=https%3A%2F%2Fyoungsu5582.life%2F%2Fposts%2F%25ED%2594%2584%25EB%25A6%25AC%25ED%258B%25B0%25EC%2596%25B4%25EB%25A1%259C%25EB%25A7%258C-%25EB%25B0%25B0%25ED%258F%25AC%25ED%2595%25B4%25EB%25B3%25B4%25EA%25B8%25B0%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyoungsu5582.life%2F%2Fposts%2F%25ED%2594%2584%25EB%25A6%25AC%25ED%258B%25B0%25EC%2596%25B4%25EB%25A1%259C%25EB%25A7%258C-%25EB%25B0%25B0%25ED%258F%25AC%25ED%2595%25B4%25EB%25B3%25B4%25EA%25B8%25B0%2F&text=%ED%94%84%EB%A6%AC%ED%8B%B0%EC%96%B4%EB%A1%9C%EB%A7%8C%20%EB%B0%B0%ED%8F%AC%ED%95%B4%EB%B3%B4%EA%B8%B0%20-%20%7B%7B%20site.data.l10n.title%20%7D%7D" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fyoungsu5582.life%2F%2Fposts%2F%25ED%2594%2584%25EB%25A6%25AC%25ED%258B%25B0%25EC%2596%25B4%25EB%25A1%259C%25EB%25A7%258C-%25EB%25B0%25B0%25ED%258F%25AC%25ED%2595%25B4%25EB%25B3%25B4%25EA%25B8%25B0%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/en/posts/%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-Jackson-%EC%84%A4%EC%A0%95%EB%93%A4-%EC%A0%95%EB%A6%AC/">사용하는 Jackson의 설정 및 기능 정리 - 2025-06-17</a><li class="text-truncate lh-lg"> <a href="/en/posts/%EC%98%88%EC%99%B8-%EA%B9%8A%EA%B2%8C-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0-%EC%98%88%EC%99%B8-%EB%8F%99%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%8D%98%EC%A7%80%EA%B8%B0/">예외 깊게 살펴보기, 예외 동적으로 던지기 - 2025-05-31</a><li class="text-truncate lh-lg"> <a href="/en/posts/%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-ENUM-%EA%B0%92-%EB%8C%80%EC%9D%91,Interface-%ED%86%B5%ED%95%9C-%EC%A4%91%EB%B3%B5-%EC%BD%94%EB%93%9C-%EC%A0%9C%EA%B1%B0/">사용하지 않는 ENUM 값 대응 , Interface 를 통한 중복 코드 제거 - 2025-05-26</a><li class="text-truncate lh-lg"> <a href="/en/posts/oom-killer,-heap-memory,-heapdump/">oom killer, heap memory, heapdump - 2025-04-20</a><li class="text-truncate lh-lg"> <a href="/en/posts/%EB%8F%88%EC%9C%BC%EB%A1%9C-%EC%8B%9C%EA%B0%84-%EC%82%AC%EA%B8%B0/">돈으로 시간을 사기 - 부제 : openai 통한 게시글 소개글 및 섬네일 자동 생성 스크립트 - 2025-03-22</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9A%B0%ED%85%8C%EC%BD%94/">우테코</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%8A%A4%ED%94%84%EB%A7%81/">스프링</a> <a class="post-tag btn btn-outline-primary" href="/tags/%ED%9A%8C%EA%B3%A0/">회고</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%83%ED%97%88%EB%B8%8C/">깃허브</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94/">자바</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%83/">깃</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%BD%94%ED%8B%80%EB%A6%B0/">코틀린</a> <a class="post-tag btn btn-outline-primary" href="/tags/%ED%85%8C%EC%8A%A4%ED%8A%B8/">테스트</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/en/posts/CodePipeline-%EC%97%90%EC%84%9C-%ED%94%84%EB%9D%BC%EC%9D%B4%EB%B9%97-%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88-%EB%8F%84%EC%9E%85%EA%B8%B0-Token-VS-SSH-In-Github/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1723046665" data-df="ll" > Aug 8, 2024 </time><h4 class="pt-0 my-2">CodePipeline 에서 프라이빗 서브모듈 도입기( Token VS SSH In Github )</h4><div class="text-muted"><p>이번에도 50번 정도의 삽질을 하며...</p></div></div></a></article><article class="col"> <a href="/en/posts/CI-CD-%EC%A0%84%EB%9E%B5-%EC%84%A0%ED%83%9D%ED%95%98%EA%B8%B0/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1722066595" data-df="ll" > Jul 27, 2024 </time><h4 class="pt-0 my-2">CI & CD 전략 선택하기 ( 부제 : CodePipeline 사용기 )</h4><div class="text-muted"><p>CI & CD 의 전략, CodePipeline 사용</p></div></div></a></article><article class="col"> <a href="/en/posts/%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EC%9D%B4%EB%8F%99%EA%B8%B02-%ED%94%84%EB%A1%9C%EB%A9%94%ED%85%8C%EC%9A%B0%EC%8A%A4%EB%A1%9C%ED%82%A4%EA%B7%B8%EB%9D%BC%ED%8C%8C%EB%82%98-%EC%84%A4%EC%B9%98-%EC%97%B0%EA%B2%B0/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1727014739" data-df="ll" > Sep 22, 2024 </time><h4 class="pt-0 my-2">모니터링 이동기(2) - 프로메테우스,로키,그라파나 설치 & 연결</h4><div class="text-muted"><p>프로메테우스 로키 그라파나 직접 설치부터 연결&시각화 A To Z 까지</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/en/posts/%EC%9E%90%EB%B0%94-%EC%9E%A1%ED%95%99%EC%82%AC%EC%A0%84-%EB%8F%99%EB%93%B1%EC%84%B1Nested-Class/" class="btn btn-outline-primary" aria-label="Older" ><p>자바 잡학사전 - 동등성,Nested Class</p></a> <a href="/en/posts/3%EA%B0%9C%EC%9B%94-%EA%B0%84%EC%9D%98-%EC%B7%A8%EC%A4%80%EC%9D%84-%EB%81%9D%EB%82%B4%EB%A9%B0/" class="btn btn-outline-primary" aria-label="Newer" ><p>3개월 간의 취준을 끝내며</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://github.com/youngsu5582">이영수</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9A%B0%ED%85%8C%EC%BD%94/">우테코</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%8A%A4%ED%94%84%EB%A7%81/">스프링</a> <a class="post-tag btn btn-outline-primary" href="/tags/%ED%9A%8C%EA%B3%A0/">회고</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%83%ED%97%88%EB%B8%8C/">깃허브</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94/">자바</a> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EA%B9%83/">깃</a> <a class="post-tag btn btn-outline-primary" href="/tags/%EC%BD%94%ED%8B%80%EB%A6%B0/">코틀린</a> <a class="post-tag btn btn-outline-primary" href="/tags/%ED%85%8C%EC%8A%A4%ED%8A%B8/">테스트</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'youngsu5582/blog', 'data-repo-id': 'R_kgDOOI2eig', 'data-category': 'Post', 'data-category-id': 'DIC_kwDOOI2eis4Cob3Y', 'data-mapping': 'pathname', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
